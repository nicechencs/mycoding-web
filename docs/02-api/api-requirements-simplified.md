# MyCoding Web API 需求文档 - 精简务实版

> 基于批判性分析后的精简设计
> 生成时间：2025-09-08
> 设计原则：KISS (Keep It Simple, Stupid) + YAGNI (You Aren't Gonna Need It)

## 🎯 核心理念

**这是一个技术资源分享网站，不是社交媒体！**

- ❌ 删除所有社交功能（Vibe动态、用户关注）
- ❌ 删除过度复杂的功能（批量操作、通知系统）
- ✅ 专注核心功能（资源分享、技术学习）
- ✅ 保持简单务实（30个必要API即可）

## 📋 精简后的API清单（30个核心端点）

### 1. 用户认证（5个端点）

| 方法 | 端点 | 描述 | 必要性 |
|------|------|------|--------|
| POST | `/api/auth/login` | 用户登录 | ✅ 核心 |
| POST | `/api/auth/register` | 用户注册 | ✅ 核心 |
| POST | `/api/auth/logout` | 用户登出 | ✅ 核心 |
| GET | `/api/auth/profile` | 获取当前用户 | ✅ 核心 |
| PUT | `/api/users/profile` | 更新个人信息 | ✅ 核心 |

**删除的端点：**
- ❌ refresh-token（使用Session更简单）
- ❌ 用户关注系统（5个端点全删）
- ❌ 用户动态获取（不需要社交功能）

### 2. 资源管理（10个端点）

| 方法 | 端点 | 描述 | 必要性 |
|------|------|------|--------|
| GET | `/api/resources` | 获取资源列表 | ✅ 核心 |
| GET | `/api/resources/{id}` | 获取资源详情 | ✅ 核心 |
| POST | `/api/resources` | 创建资源 | ✅ 核心 |
| PUT | `/api/resources/{id}` | 更新资源 | ✅ 核心 |
| DELETE | `/api/resources/{id}` | 删除资源 | ✅ 核心 |
| POST | `/api/resources/{id}/like` | 点赞资源（简单点赞） | ✅ 核心 |
| DELETE | `/api/resources/{id}/like` | 取消点赞 | ✅ 核心 |
| GET | `/api/resources/{id}/comments` | 获取评论 | ✅ 核心 |
| POST | `/api/resources/{id}/comments` | 发表评论 | ✅ 核心 |
| DELETE | `/api/resources/comments/{id}` | 删除评论 | ✅ 核心 |

**简化的改进：**
- ✅ 使用简单的点赞替代5星评分系统
- ✅ 删除favorite/收藏（点赞就够了）
- ❌ 删除批量操作（4个端点全删）
- ❌ 删除评论回复（过度复杂）
- ❌ 删除评论点赞（不必要）

### 3. 文章管理（8个端点）

| 方法 | 端点 | 描述 | 必要性 |
|------|------|------|--------|
| GET | `/api/articles` | 获取文章列表 | ✅ 核心 |
| GET | `/api/articles/{id}` | 获取文章详情 | ✅ 核心 |
| POST | `/api/articles` | 创建文章 | ✅ 核心 |
| PUT | `/api/articles/{id}` | 更新文章 | ✅ 核心 |
| DELETE | `/api/articles/{id}` | 删除文章 | ✅ 核心 |
| POST | `/api/articles/{id}/like` | 点赞文章 | ✅ 核心 |
| GET | `/api/articles/{id}/comments` | 获取评论 | ✅ 核心 |
| POST | `/api/articles/{id}/comments` | 发表评论 | ✅ 核心 |

**删除的功能：**
- ❌ 文章草稿（过早优化）
- ❌ 相关文章推荐（可用标签替代）

### 4. 搜索与分类（4个端点）

| 方法 | 端点 | 描述 | 必要性 |
|------|------|------|--------|
| GET | `/api/search` | 全站搜索 | ✅ 核心 |
| GET | `/api/categories` | 获取分类列表 | ✅ 核心 |
| GET | `/api/tags` | 获取标签列表 | ✅ 核心 |
| GET | `/api/tags/popular` | 热门标签 | ✅ 核心 |

**简化改进：**
- 合并搜索端点，一个搜索解决所有
- 分类和标签只需要读取，不需要CRUD

### 5. 文件上传（1个端点）

| 方法 | 端点 | 描述 | 限制 |
|------|------|------|------|
| POST | `/api/upload` | 统一上传接口 | 2MB限制 |

**简化改进：**
- 一个上传端点处理所有类型
- 限制改为2MB（10MB太大了）

### 6. 简单统计（2个端点）

| 方法 | 端点 | 描述 | 必要性 |
|------|------|------|--------|
| GET | `/api/stats/resources` | 资源统计 | ✅ 有用 |
| GET | `/api/stats/trending` | 热门内容 | ✅ 有用 |

## ❌ 完全删除的模块

### 1. Vibe动态系统（删除13个端点）
**理由**：这不是社交媒体，用户来学技术不是发朋友圈

### 2. 通知系统（删除6个端点）
**理由**：MVP阶段不需要，邮件通知足够

### 3. 用户关注系统（删除5个端点）
**理由**：技术学习网站不需要社交功能

### 4. 批量操作（删除4个端点）
**理由**：没有实际使用场景

### 5. 复杂的评分系统（删除5个端点）
**理由**：简单的点赞比5星评分更实用

## 📐 简化的技术规范

### 请求限制（更务实）
```yaml
请求频率: 60次/分钟（够用了）
文件上传: 最大2MB（不是图床）
分页大小: 默认20，最大30（100太多了）
```

### 简化的响应格式
```json
// 成功响应 - 直接返回数据
{
  "data": {...},
  "page": 1,
  "total": 100
}

// 错误响应 - 利用HTTP状态码
{
  "error": "错误信息"
}
```

**为什么不需要success字段？** HTTP状态码已经说明了一切！

### 认证方案简化
- 使用Session + Cookie（对于单体应用更简单）
- 或者简单的Bearer Token（不需要refresh机制）

## 🎯 真正需要但缺失的功能

### 1. 学习相关功能（应该优先开发）
- `GET /api/resources/difficulty/{level}` - 按难度筛选
- `GET /api/learning-paths` - 学习路径推荐
- `GET /api/resources/{id}/examples` - 代码示例

### 2. 更好的搜索功能
- 支持代码搜索
- 支持技术栈筛选
- 支持难度级别筛选

## 📊 精简后的效果

| 对比项 | 原设计 | 精简后 | 节省 |
|--------|--------|--------|------|
| API端点数 | 107个 | 30个 | 72% |
| 模块数量 | 9个 | 5个 | 44% |
| 代码复杂度 | 高 | 低 | 60% |
| 开发时间 | 3个月 | 1个月 | 66% |
| 维护成本 | 高 | 低 | 70% |

## ✅ 结论

**少即是多！** 

这个精简版本：
- 保留了所有核心功能
- 删除了所有不必要的复杂性
- 更容易开发和维护
- 更符合KISS和YAGNI原则
- 真正关注用户需求（学习技术）而不是花哨的功能

**记住：先做好核心功能，有需要再添加！**