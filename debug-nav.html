<!doctype html>
<html>
  <head>
    <title>Navigation Debug</title>
  </head>
  <body>
    <h1>Next.js导航调试</h1>
    <p>在浏览器控制台中运行以下测试：</p>

    <pre>
// 1. 检查Next.js router是否可用
window.__NEXT_DATA__

// 2. 检查是否有全局事件监听器干扰
console.log('Global click listeners:', getEventListeners(document))

// 3. 手动触发导航
if (window.next && window.next.router) {
    window.next.router.push('/posts')
}

// 4. 检查Link组件是否正常
document.querySelectorAll('a[href^="/"]').forEach(link => {
    console.log('Link found:', link.href, link)
})

// 5. 模拟点击事件
const link = document.querySelector('a[href="/posts"]')
if (link) {
    link.click()
    console.log('Link clicked')
}
    </pre>

    <script>
      // 自动在3秒后运行基本检查
      setTimeout(() => {
        console.log('=== Navigation Debug Report ===')
        console.log('Next.js Data:', window.__NEXT_DATA__)
        console.log(
          'Links found:',
          document.querySelectorAll('a[href^="/"]').length
        )
        console.log('Current URL:', location.href)

        // 尝试使用 window.next.router
        if (window.next && window.next.router) {
          console.log('Next.js router available')
          try {
            window.next.router.push('/posts')
            console.log('Router.push called successfully')
          } catch (e) {
            console.error('Router.push failed:', e)
          }
        } else {
          console.log('Next.js router not available')
        }
      }, 3000)
    </script>
  </body>
</html>
