# 代码架构规范指导

在代码编写、审查或阅读过程中必须严格遵循以下规范，以确保代码质量和可维护性。

## 1. 避免代码坏味道

为了维护整洁优雅的架构，需要警惕以下常见问题：

1. **僵化性（Rigidity）**  
   系统难以变更，即使是微小的修改也会引起广泛的连锁更新。

2. **冗余性（Redundancy）**  
   重复的代码逻辑分散在多个地方，导致可维护性差和不一致问题。

3. **循环依赖（Circular Dependencies）**  
   模块间相互缠绕依赖，使得解耦、测试和重用变得困难。

4. **脆弱性（Fragility）**  
   在代码某一部分的修改会意外破坏看似无关的其他部分。

5. **晦涩性（Obscurity）**  
   代码意图不明确，结构混乱，难以理解。

6. **数据泥团（Data Clumps）**  
   重复出现的参数组合表明它们应该被封装成专门的对象。

7. **不必要的复杂性（Needless Complexity）**  
   使用不必要的复杂方案来过度设计简单问题。

---

## 2. 强制执行规则

- 在代码创建或审查过程中，必须**严格执行硬性约束**。
- 一旦发现任何**代码坏味道**，必须**立即询问用户**是否需要重构，并**提供合理的改进建议**。

---

## 3. 文件管理规范

### 代码脚本管理要求

项目根目录不要有任何脚本、代码文件；
脚本存放于scripts文件夹，代码存放至src文件夹，并分类、编号管理

### 文档结构要求

- **README文件**：每个项目模块根目录下必须保留README.md，提供项目概述和快速入门
- **技术文档**：除README外的所有技术文档必须存放在`docs/`文件夹中，按照层级结构组织
- **文档层次**：使用明确的目录层级，并对文档进行编号，便于导航和维护

  ```
  docs/
  ├── 01-architecture/        # 架构设计
  ├── 02-api/                 # API文档
  ├── 03-xxx
  ├── 04-xxx
  ├── 05-xxx
  └── ......
  ```

### 文档质量标准

- **简洁性**：保持文档简洁明了，避免冗余内容
- **模块化**：当文档过大时（>1000行），必须进行拆分
  - 按功能模块拆分
  - 按用户角色拆分
  - 按技术层次拆分
- **交叉引用**：文档间使用相对路径进行交叉引用
- **同步维护**：代码变更时同步更新相关文档

### 禁止的做法

- ❌ 在项目根目录或src目录下创建散乱的.md文件
- ❌ 创建超长文档而不进行适当拆分
- ❌ 重复内容在多个文档中出现
- ❌ 创建过度详细的文档影响可读性

---

# 4.新曾需求要求

在处理用户新需求时，先更新相关文档，再同步修改代码；若需求变动较大，应向用户提出重构建议，以确保整体结构合理。

## 5. 回复要求

**使用中文回复**

# 其他

当前系统环境是Windows，请使用Windows相关命令或文件编码格式。
